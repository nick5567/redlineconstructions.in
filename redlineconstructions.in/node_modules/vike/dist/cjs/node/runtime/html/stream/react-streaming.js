"use strict";
// Zero-config support for https://www.npmjs.com/package/react-streaming
Object.defineProperty(exports, "__esModule", { value: true });
exports.isStreamFromReactStreamingPackage = isStreamFromReactStreamingPackage;
exports.streamFromReactStreamingPackageToString = streamFromReactStreamingPackageToString;
exports.getStreamOfReactStreamingPackage = getStreamOfReactStreamingPackage;
const utils_js_1 = require("../../utils.js");
const stream_js_1 = require("../stream.js");
function streamFromReactStreamingPackageToString(stream) {
    if (stream.pipe) {
        return (0, stream_js_1.streamPipeNodeToString)(stream.pipe);
    }
    if (stream.readable) {
        return (0, stream_js_1.streamReadableWebToString)(stream.readable);
    }
    (0, utils_js_1.assert)(false);
}
function isStreamFromReactStreamingPackage(thing) {
    if ((0, utils_js_1.hasProp)(thing, 'injectToStream', 'function')) {
        (0, utils_js_1.assertUsage)((0, utils_js_1.hasProp)(thing, 'hasStreamEnded', 'function'), (0, utils_js_1.isVikeReactApp)()
            ? //
                'Update vike-react to its latest version'
            : 'Update react-streaming to its latest version');
        return true;
    }
    return false;
}
function getStreamOfReactStreamingPackage(stream) {
    if (stream.pipe) {
        return { __streamPipeNode: stream.pipe };
    }
    if (stream.readable) {
        return stream.readable;
    }
    (0, utils_js_1.assert)(false);
}
