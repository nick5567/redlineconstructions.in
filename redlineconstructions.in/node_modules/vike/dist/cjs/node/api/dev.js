"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dev = dev;
const prepareViteApiCall_js_1 = require("./prepareViteApiCall.js");
const vite_1 = require("vite");
const globalContext_js_1 = require("../runtime/globalContext.js");
/**
 * Programmatically trigger `$ vike dev`
 *
 * https://vike.dev/api#dev
 */
async function dev(options = {}) {
    (0, globalContext_js_1.setGlobalContext_isProduction)(false);
    const { viteConfigFromUserEnhanced } = await (0, prepareViteApiCall_js_1.prepareViteApiCall)(options, 'dev');
    const server = await (0, vite_1.createServer)(viteConfigFromUserEnhanced);
    return {
        viteServer: server,
        viteConfig: server.config,
    };
}
