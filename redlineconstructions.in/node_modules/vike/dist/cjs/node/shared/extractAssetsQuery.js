"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractAssetsAddQuery = extractAssetsAddQuery;
exports.extractAssetsRemoveQuery = extractAssetsRemoveQuery;
// We import from node/utils.ts instead of node/vite/utils.ts because this file is loaded by the server runtime
const utils_js_1 = require("./utils.js");
const query = 'extractAssets';
function extractAssetsAddQuery(id) {
    const fileExtension = (0, utils_js_1.getFileExtension)(id);
    if (!fileExtension || id.includes('virtual:vike:')) {
        return `${id}?${query}`;
    }
    else {
        if (!id.includes('?')) {
            return `${id}?${query}&lang.${fileExtension}`;
        }
        else {
            return id.replace('?', `?${query}&`);
        }
    }
}
function extractAssetsRemoveQuery(id) {
    if (!id.includes('?'))
        return id;
    const suffix = `?${query}`;
    // Only supports 'virtual:vike:' IDs
    (0, utils_js_1.assert)(id.endsWith(query));
    return id.slice(0, -1 * suffix.length);
}
